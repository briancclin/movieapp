<header>
	<nav class="navbar navbar-fixed-top navbar-inverse" id="gray-navbar">
		<div class="container">
      		<div class="navbar-header">
				<a class="navbar-brand" id="brian-brand">
					<%= link_to "Brian Lin", root_path, id: "logo" %>
				</a>
				<button type="button" id="toggle-button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav-right">
        			<span class="sr-only">Toggle navigation</span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
      			</button>
      		</div>
      		<form class="navbar-form navbar-left" id="navbar-search" role="search" action="/movie/result" method="get">
      			<div class="input-group" id="search-bar">
        			<input type="text" id="query_str" name="query_str" data-autocomplete="/movie/autocomplete_movie_name" class="form-control" placeholder="Search a movie">  	
        				<span class="input-group-btn">
        					<button type="submit" class="pure-button btn" id="search-button">
        						<i class="fa fa-search fa-lg"></i>
        					</button>
        				</span>
        		</div>
      		</form>
      		<div class="collapse navbar-collapse" id="nav-right">
        		<ul class="nav navbar-right navbar-nav">
          			<li><%= link_to "Home", root_path, id: "home-link" %></li>
          			<li><%= link_to "About", about_index_path, id: "movie-link" %></li>
          			<% if logged_in? %>
          				<li><%= link_to "Settings", edit_user_path(current_user) %></li>
          				<li><%= link_to "Log out", logout_path, method: "delete" %></li>
          			<% else %>
          				<li><%= link_to "Sign up", signup_path %></li>
        				<li><%= link_to "Log in", login_path %></li>
        			<% end %>
        		</ul>
       		</div>
        </div>
	</nav>
	<script>
		$('#query_str').autocomplete({ delay: 0, minLength: 0 });
		
		$("button#search-button").click(function() {
			var query_str = $("#query_str").val();
			var regExp = /\((.+)\)/;
			var match = query_str.match(regExp);
			if(match === null || query_str == "")
			{
				$("#query_str").val('');
				event.preventDefault();
				$("#query_str").attr("placeholder", "Select from autocomplete");
				$("#query_str").addClass('red-placeholder');
			}
		});
	</script>
		
</header>
